<div class="news">
  {% if site.news != blank %}
    {% assign news = site.news | reverse %}
    {% assign news_size = news | size %}

    {% if include.limit and page.announcements.limit %}
      {% assign news_limit = page.announcements.limit %}
    {% else %}
      {% assign news_limit = news_size %}
    {% endif %}

    <div
      class="{% if include.limit and page.announcements.scrollable and news_size > 3 %}overflow-auto{% endif %}"
      style="{% if include.limit and page.announcements.scrollable and news_size > 3 %}max-height:60vw;{% endif %}"
    >
      {% for item in news limit: news_limit %}
        <article class="card shadow-sm mb-3 news-card">
          <div class="d-flex flex-column">
            {% if item.image %}
              <div class="news-thumb-wrap"
                  style="background-image: url('{{ item.image | relative_url }}');">
              </div>
            {% endif %}


            <div class="{% if item.image %}col{% else %}col-12{% endif %}">
              <div class="card-body d-flex flex-column">
                <div class="small text-muted mb-1">
                  {{ item.date | date: '%b %d, %Y' }}
                  {% if item.tags %}
                    â€¢ {% for t in item.tags %}
                      <span class="badge bg-light text-dark border me-1">{{ t }}</span>
                    {% endfor %}
                  {% endif %}
                </div>

                {% if item.inline %}
                  <div class="card-text mb-2 news-excerpt">
                    {{ item.content | remove: '<p>' | remove: '</p>' | emojify }}
                  </div>
                {% else %}
                  <h5 class="card-title mb-2 news-title">
                    {% if item.external_url %}
                      <a class="stretched-link" href="{{ item.external_url }}" target="_blank" rel="noopener">{{ item.title }}</a>
                    {% else %}
                      <a class="stretched-link news-title-link" href="{{ item.url | relative_url }}">{{ item.title }}</a>
                    {% endif %}
                  </h5>

                  {% assign preview = item.excerpt | default: item.content %}
                  {% if preview %}
                    <p class="card-text mb-2 news-excerpt">
                      {{ preview | strip_html | truncate: 160 }}
                    </p>
                  {% endif %}
                {% endif %}

                {% if item.cta_text and item.cta_url %}
                  <div class="mt-2">
                    <a href="{{ item.cta_url }}" class="btn btn-sm btn-outline-primary">{{ item.cta_text }}</a>
                  </div>
                {% endif %}
              </div>
            </div>
          </div>
        </article>
      {% endfor %}
    </div>
  {% else %}
    <p>No news so far...</p>
  {% endif %}
</div>
